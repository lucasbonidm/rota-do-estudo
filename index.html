<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Rota do Estudo</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="css/styles.css">
</head>
<body>

    <!-- ===== HOME VIEW ===== -->
    <div id="home-view" class="view">
        <div class="home-layout">
            <header class="home-header">
                <div class="home-brand">
                    <svg xmlns="http://www.w3.org/2000/svg" width="22" height="22" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21.42 10.922a1 1 0 0 0-.019-1.838L12.83 5.18a2 2 0 0 0-1.66 0L2.6 9.08a1 1 0 0 0 0 1.832l8.57 3.908a2 2 0 0 0 1.66 0z"/><path d="M22 10v6"/><path d="M6 12.5V16a6 3 0 0 0 12 0v-3.5"/></svg>
                    <h1 class="home-title">Rota do Estudo</h1>
                </div>
                <div class="home-actions">
                    <div class="settings-dropdown" id="settingsDropdown">
                        <button id="settingsToggle" class="btn btn-ghost" title="Configurações" aria-label="Abrir configurações" aria-expanded="false">
                            <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z"/><circle cx="12" cy="12" r="3"/></svg>
                        </button>
                        <div class="settings-menu" id="settingsMenu">
                            <button id="importAllBtn" class="settings-menu-item">
                                <svg xmlns="http://www.w3.org/2000/svg" width="15" height="15" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"/><polyline points="17 8 12 3 7 8"/><line x1="12" x2="12" y1="3" y2="15"/></svg>
                                <span>Importar</span>
                            </button>
                            <button id="exportAllBtn" class="settings-menu-item">
                                <svg xmlns="http://www.w3.org/2000/svg" width="15" height="15" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"/><polyline points="7 10 12 15 17 10"/><line x1="12" x2="12" y1="15" y2="3"/></svg>
                                <span>Exportar</span>
                            </button>
                            <div class="settings-menu-divider"></div>
                            <button id="themeToggleHome" class="settings-menu-item">
                                <svg class="icon-sun" xmlns="http://www.w3.org/2000/svg" width="15" height="15" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="4"/><path d="M12 2v2"/><path d="M12 20v2"/><path d="m4.93 4.93 1.41 1.41"/><path d="m17.66 17.66 1.41 1.41"/><path d="M2 12h2"/><path d="M20 12h2"/><path d="m6.34 17.66-1.41 1.41"/><path d="m19.07 4.93-1.41 1.41"/></svg>
                                <svg class="icon-moon" xmlns="http://www.w3.org/2000/svg" width="15" height="15" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M12 3a6 6 0 0 0 9 9 9 9 0 1 1-9-9Z"/></svg>
                                <span class="theme-label-light">Modo Escuro</span>
                                <span class="theme-label-dark">Modo Claro</span>
                            </button>
                        </div>
                    </div>
                    <button id="newCourseBtn" class="btn btn-primary">
                        <svg xmlns="http://www.w3.org/2000/svg" width="15" height="15" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M5 12h14"/><path d="M12 5v14"/></svg>
                        <span>Novo Curso</span>
                    </button>
                </div>
            </header>

            <main class="home-content">
                <div id="courseGrid" class="course-grid"></div>
                <div id="emptyState" class="empty-state" style="display: none;">
                    <svg xmlns="http://www.w3.org/2000/svg" width="48" height="48" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"><path d="M21.42 10.922a1 1 0 0 0-.019-1.838L12.83 5.18a2 2 0 0 0-1.66 0L2.6 9.08a1 1 0 0 0 0 1.832l8.57 3.908a2 2 0 0 0 1.66 0z"/><path d="M22 10v6"/><path d="M6 12.5V16a6 3 0 0 0 12 0v-3.5"/></svg>
                    <h2>Nenhum curso adicionado</h2>
                    <p>Crie um curso manualmente ou importe uma playlist do YouTube.</p>
                    <button id="emptyStateBtn" class="btn btn-primary">
                        <svg xmlns="http://www.w3.org/2000/svg" width="15" height="15" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M5 12h14"/><path d="M12 5v14"/></svg>
                        <span>Criar primeiro curso</span>
                    </button>
                </div>
            </main>
            <footer class="home-footer">
                <p>
                    Feito por <a href="https://github.com/lucasbonidm" target="_blank" rel="noopener noreferrer">Lucas Boni</a>
                    •
                    <a href="https://github.com/lucasbonidm/rota-do-estudo/blob/main/README.md" target="_blank" rel="noopener noreferrer">Aprenda como usar</a>
                    •
                    <a href="https://github.com/lucasbonidm/rota-do-estudo/blob/main/INSTALL_EXTENSION.md" target="_blank" rel="noopener noreferrer">Instale nossa extensão</a>
                </p>
            </footer>
        </div>
    </div>

    <!-- ===== COURSE MODAL ===== -->
    <div id="courseModalOverlay" class="modal-overlay" style="display: none;">
        <div class="modal" role="dialog" aria-modal="true" aria-labelledby="modalTitle">
            <div class="modal-header">
                <h2 id="modalTitle" class="modal-title">Novo Curso</h2>
                <button id="modalClose" class="btn btn-ghost modal-close" aria-label="Fechar">
                    <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M18 6 6 18"/><path d="m6 6 12 12"/></svg>
                </button>
            </div>
            <div class="modal-tabs">
                <button class="modal-tab active" data-tab="manual">Manual</button>
                <button class="modal-tab" data-tab="import">Importar JSON</button>
            </div>
            <div class="modal-body">
                <!-- Manual Tab -->
                <div id="tabManual" class="tab-content active">
                    <label class="form-label" for="courseTitleInput">Nome do curso</label>
                    <input id="courseTitleInput" type="text" class="form-input" placeholder="Ex: JavaScript Completo" autocomplete="off">
                    <button id="createCourseBtn" class="btn btn-primary modal-action">Criar Curso</button>
                </div>
                <!-- Import Tab -->
                <div id="tabImport" class="tab-content">
                    <div class="import-help">
                        <p class="import-help-title">Como obter o JSON da playlist:</p>
                        <ol class="import-steps">
                            <li>Abra a <strong>playlist completa</strong> no YouTube</li>
                            <li>Role ate o final para carregar todos os videos</li>
                            <li>Pressione <kbd>F12</kbd> para abrir o DevTools</li>
                            <li>Va na aba <strong>Console</strong></li>
                            <li>Cole o codigo abaixo e pressione <kbd>Enter</kbd></li>
                            <li>Copie o JSON gerado e cole no campo abaixo</li>
                        </ol>
                        <div class="code-template">
                            <div class="code-template-header">
                                <span>Codigo para o Console</span>
                                <button type="button" id="copyCourseScript" class="btn btn-ghost btn-sm">
                                    <svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><rect width="14" height="14" x="8" y="8" rx="2" ry="2"/><path d="M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"/></svg>
                                    <span>Copiar</span>
                                </button>
                            </div>
                            <pre class="code-template-code" id="courseScriptCode"></pre>
                        </div>
                    </div>
                    <label class="form-label" for="importJsonInput" style="margin-top:16px">Cole o JSON gerado aqui</label>
                    <textarea id="importJsonInput" class="form-textarea" rows="6" placeholder='{"title": "...", "modules": [...]}'></textarea>
                    <div id="importError" class="form-error" style="display: none;"></div>
                    <button id="importCourseBtn" class="btn btn-primary modal-action">Importar</button>
                </div>
            </div>
        </div>
    </div>

    <!-- ===== COURSE VIEW ===== -->
    <div id="course-view" class="view">
        <div class="app-layout">

            <!-- LEFT SIDEBAR -->
            <aside class="sidebar" id="sidebar">
                <div class="sidebar-header">
                    <div class="sidebar-brand">
                        <button id="backToHome" class="btn-back" title="Voltar para cursos" aria-label="Voltar para lista de cursos">
                            <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="m12 19-7-7 7-7"/><path d="M19 12H5"/></svg>
                        </button>
                        <span id="sidebarCourseTitle">Curso</span>
                    </div>
                </div>

                <div class="sidebar-content">
                    <!-- Search -->
                    <div class="sidebar-group">
                        <div class="search-field">
                            <svg class="search-icon" xmlns="http://www.w3.org/2000/svg" width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="11" cy="11" r="8"/><path d="m21 21-4.3-4.3"/></svg>
                            <input type="search" id="searchInput" placeholder="Buscar aulas..." aria-label="Buscar aulas por titulo">
                            <button id="clearSearch" class="search-clear" aria-label="Limpar busca" style="display: none;">
                                <svg xmlns="http://www.w3.org/2000/svg" width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M18 6 6 18"/><path d="m6 6 12 12"/></svg>
                            </button>
                        </div>
                    </div>

                    <!-- Overall Progress -->
                    <div class="sidebar-group">
                        <div class="sidebar-group-label">Progresso Geral</div>
                        <div class="progress-container">
                            <div class="progress-track">
                                <div class="progress-fill"></div>
                            </div>
                            <span class="progress-text">0/0 aulas concluidas</span>
                        </div>
                    </div>

                    <!-- Module Navigation -->
                    <div class="sidebar-group">
                        <div class="sidebar-group-label sidebar-group-label-flex">
                            <span>Modulos</span>
                            <button id="addModuleBtn" class="btn-add-small" title="Adicionar modulo">
                                <svg xmlns="http://www.w3.org/2000/svg" width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M5 12h14"/><path d="M12 5v14"/></svg>
                            </button>
                        </div>
                        <nav id="moduleNav" role="navigation" aria-label="Navegacao de modulos"></nav>
                    </div>
                </div>

                <div class="sidebar-footer">
                    <div class="shortcuts-hint">
                        <span><kbd>Alt</kbd><kbd>&rarr;</kbd> Proxima</span>
                        <span><kbd>Alt</kbd><kbd>M</kbd> Concluir</span>
                    </div>
                </div>
            </aside>

            <!-- Sidebar overlay for mobile -->
            <div class="sidebar-overlay" id="sidebarOverlay"></div>

            <!-- MAIN CONTENT -->
            <main class="main-content">
                <header class="content-header">
                    <button class="sidebar-trigger" id="sidebarTrigger" aria-label="Abrir menu lateral">
                        <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><rect width="18" height="18" x="3" y="3" rx="2"/><path d="M9 3v18"/></svg>
                    </button>
                    <div class="header-info">
                        <h1 id="moduleTitle" class="content-title">Selecione um modulo</h1>
                        <p id="moduleDescription" class="content-description"></p>
                    </div>
                </header>

                <div class="content-body">
                    <!-- Video Section -->
                    <section class="video-section">
                        <div id="videoContainer" class="video-container">
                            <p class="placeholder">Selecione uma aula para comecar</p>
                        </div>

                        <div class="lesson-info">
                            <h2 id="currentLessonTitle" class="lesson-info-title">&mdash;</h2>
                            <p id="currentLessonModule" class="lesson-info-module">&mdash;</p>
                        </div>

                        <div class="lesson-controls">
                            <button id="markComplete" class="btn btn-outline" disabled title="Marcar/desmarcar aula como concluida">
                                <svg xmlns="http://www.w3.org/2000/svg" width="15" height="15" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M20 6 9 17l-5-5"/></svg>
                                <span>Marcar como Concluida</span>
                            </button>
                            <a id="openExternal" target="_blank" rel="noopener noreferrer" class="btn btn-ghost" style="display: none;">
                                <svg xmlns="http://www.w3.org/2000/svg" width="15" height="15" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M15 3h6v6"/><path d="M10 14 21 3"/><path d="M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6"/></svg>
                                <span>Abrir no YouTube</span>
                            </a>
                        </div>
                    </section>

                    <!-- Lesson List Panel -->
                    <aside class="lesson-panel">
                        <div class="panel-header panel-header-flex">
                            <h2 class="panel-title">Aulas do Modulo</h2>
                            <button id="addLessonBtn" class="btn-add-small" title="Adicionar aula">
                                <svg xmlns="http://www.w3.org/2000/svg" width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M5 12h14"/><path d="M12 5v14"/></svg>
                            </button>
                        </div>
                        <div class="scroll-area">
                            <div id="lessonList" class="lesson-list" role="region" aria-label="Lista de aulas"></div>
                        </div>
                        <div id="noResults" class="no-results" style="display: none;">
                            <p>Nenhuma aula encontrada.</p>
                        </div>
                    </aside>
                </div>
            </main>

        </div>
        <footer class="course-footer">
            <p>
                Feito por <a href="https://github.com/lucasbonidm" target="_blank" rel="noopener noreferrer">Lucas Boni</a>
                •
                <a href="https://github.com/lucasbonidm/navegador-curso/blob/main/README.md" target="_blank" rel="noopener noreferrer">Aprenda como usar</a>
                •
                <a href="https://github.com/lucasbonidm/navegador-curso/blob/main/INSTALL_EXTENSION.md" target="_blank" rel="noopener noreferrer">Instale nossa extensão</a>
            </p>
        </footer>
    </div>

    <!-- ===== INLINE FORM MODAL (for adding lessons/modules) ===== -->
    <div id="inlineModalOverlay" class="modal-overlay" style="display: none;">
        <div class="modal modal-small" role="dialog" aria-modal="true" aria-labelledby="inlineModalTitle">
            <div class="modal-header">
                <h2 id="inlineModalTitle" class="modal-title">Adicionar</h2>
                <button id="inlineModalClose" class="btn btn-ghost modal-close" aria-label="Fechar">
                    <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M18 6 6 18"/><path d="m6 6 12 12"/></svg>
                </button>
            </div>
            <div class="modal-body" id="inlineModalBody">
                <!-- Content injected dynamically -->
            </div>
        </div>
    </div>

    <script src="js/store.js"></script>
    <script src="js/router.js"></script>
    <script src="js/home.js"></script>
    <script src="js/course.js"></script>
    <script src="js/app.js"></script>
</body>
</html>
